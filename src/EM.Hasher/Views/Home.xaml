<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="EM.Hasher.Views.Home"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:EM.Hasher.Views"
    xmlns:localConverters="using:EM.Hasher.Converters"
    xmlns:localcontrols="using:EM.Hasher.Controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkitConverters="using:CommunityToolkit.WinUI.Converters"
    xmlns:ui="using:CommunityToolkit.WinUI"
    xmlns:win="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    x:Name="uxHomePage"
    NavigationCacheMode="Required"
    mc:Ignorable="d">
    <Page.Resources>
        <toolkitConverters:BoolToVisibilityConverter x:Key="BoolToVisibility" />
        <localConverters:DropColorBooleanConverter x:Key="DropColorBool" />

        <!--  These styles can be referenced to create a consistent SettingsPage layout  -->

        <!--  Spacing between cards  -->
        <x:Double x:Key="SettingsCardSpacing">4</x:Double>

        <!--  Style (inc. the correct spacing) of a section header  -->
        <Style
            x:Key="SettingsSectionHeaderTextCaptionStyle"
            BasedOn="{StaticResource BodyStrongTextBlockStyle}"
            TargetType="TextBlock">
            <Style.Setters>
                <Setter Property="Margin" Value="5,2,5,5" />
                <Setter Property="FontSize" Value="18" />
            </Style.Setters>
        </Style>

        <Style
            x:Key="SettingsSectionHeaderTextBlockStyle"
            BasedOn="{StaticResource BodyStrongTextBlockStyle}"
            TargetType="TextBlock">
            <Style.Setters>
                <Setter Property="Margin" Value="5,10,0,5" />
            </Style.Setters>
        </Style>

    </Page.Resources>
    <ScrollViewer>

        <StackPanel HorizontalAlignment="Stretch" Spacing="{StaticResource SettingsCardSpacing}">
            <win:StackPanel.ChildrenTransitions>
                <win:EntranceThemeTransition FromVerticalOffset="50" />
                <win:RepositionThemeTransition IsStaggeringEnabled="False" />
            </win:StackPanel.ChildrenTransitions>

            <!--
                <TextBlock
                    Foreground="#8bb7f0"
                    Style="{StaticResource SettingsSectionHeaderTextCaptionStyle}"
                    Text="Welcome to EM Hasher" />
            -->

            <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" Text="Home" />

            <localcontrols:HandHoverGrid>
                <controls:SettingsCard
                    x:Name="uxFileInfo"
                    ActionIcon="{ui:FontIcon Glyph=&#xE8A7;}"
                    ActionIconToolTip="Browse for a file"
                    Command="{x:Bind ViewModel.PickFileCommand}"
                    Description="Click here to browse for a file"
                    Header="Select a file"
                    HeaderIcon="{ui:FontIcon Glyph=&#xEC50;}"
                    IsClickEnabled="True"
                    IsEnabled="True" />
            </localcontrols:HandHoverGrid>

            <controls:SettingsCard ContentAlignment="Left">
                <localcontrols:DropFileControl
                    x:Name="uxDropFileControl"
                    AllowDrop="True"
                    DashColor="{x:Bind IsDropGreen, Converter={StaticResource DropColorBool}, Mode=OneWay}"
                    DragLeave="uxDropFileControl_DragLeave"
                    DragOver="uxDropFileControl_DragOver"
                    Drop="uxDropFileControl_Drop"
                    IsHitTestVisible="True" />
            </controls:SettingsCard>

            <controls:SettingsCard Visibility="{x:Bind ViewModel.IsDropFileError, Converter={StaticResource BoolToVisibility}, Mode=OneWay}">
                <controls:SettingsCard.Description>
                    <TextBlock Foreground="PaleVioletRed" Text="{x:Bind ViewModel.DropFileErrorMessage, Mode=OneWay}" />
                </controls:SettingsCard.Description>
            </controls:SettingsCard>

        </StackPanel>

    </ScrollViewer>
</Page>
